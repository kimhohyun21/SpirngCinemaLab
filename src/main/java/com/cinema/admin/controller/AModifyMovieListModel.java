package com.cinema.admin.controller;

import java.text.SimpleDateFormat;
import java.util.Date;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;

import com.cinema.admin.dao.AdminDAO;
import com.cinema.movieList.dao.MovieVO;

@Controller
public class AModifyMovieListModel {
	@Autowired
	private AdminDAO dao;
	
	@RequestMapping("Amodifymovielist.do")
	public String modifyMovieList(Model model,String sno){
		int no = Integer.parseInt(sno);		
		
		
		//영화정보들 가져오기
		MovieVO vo=dao.adminMovieData(no);
		
		//년도,월,일 분리
		SimpleDateFormat yearF=new SimpleDateFormat("yyyy");
		SimpleDateFormat monthF=new SimpleDateFormat("MM");
		SimpleDateFormat dayF=new SimpleDateFormat("dd");
		String year = yearF.format(vo.getOpendate());
		String month = monthF.format(vo.getOpendate());
		String day = dayF.format(vo.getOpendate());
		
		// 상영시간 '분'빼기
		String runtime=vo.getRuntime().replaceAll("분", "");
		vo.setRuntime(runtime);
		
		model.addAttribute("no", no);
		model.addAttribute("year", year);
		model.addAttribute("month", month);
		model.addAttribute("day", day);
		model.addAttribute("vo", vo);
		model.addAttribute("jsp", "../adminpage/menubar.jsp");
		model.addAttribute("jsp2", "../adminpage/moviemodify.jsp");
		return "main/main.jsp";
	}
}
